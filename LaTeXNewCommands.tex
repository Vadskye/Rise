\newcommand{\lcaption}[1]{\caption{#1}\label{cap:#1}}
\newcommand{\lsec}[1]{\MakeUppercase{#1}\label{#1}}
\newcommand{\lssec}[1]{\MakeUppercase{#1}\label{#1}}
\newcommand{\lsssec}[1]{#1\label{#1}}

\newcommand{\ssecfake}[1]{\par \vspace{1em}{\Large\bfseries\raggedright #1} \vspace{1em} \par}
\newcommand{\sssecfake}[1]{\par \vspace{0.5em}{}{\large\bfseries\raggedright #1} \vspace{0.5em} \par}
\newcommand{\sssecfakehref}[2]{\par \vspace{0.5em}{}{\large\bfseries\raggedright \hyperlink{#1}{#2}} \vspace{0.5em} \par}
\newcommand{\pref}[1]{page \pageref{#1}}
\newcommand{\pdref}[1]{#1 (page \pageref{#1})}
\newcommand{\pcref}[1]{#1, page \pageref{#1}}
\newcommand{\tref}[1]{Table \ref{cap:#1}: #1 (\pref{cap:#1})}
\newcommand{\trefnp}[1]{Table \ref{cap:#1}: #1}
\newcommand{\trefcp}[1]{Table \ref{cap:#1}: #1, \pref{cap:#1}}
\newcommand{\trefnum}[1]{Table \ref{cap:#1}}

\newcommand{\minus}{\texttt{-{}}}
\newcommand{\plus}{\texttt{+}}    %Use a smaller positive marker for use directly adjacent to numbers
\newcommand{\add}{\texttt{+}{\footnotesize{ }}}    %Use a smaller plus sign
\newcommand{\sub}{\texttt{- }}
\newcommand{\mult}{x}
\newcommand{\mtimes}{x }
\newcommand{\ki}{\emph{ki}\xspace}
\newcommand{\Ki}{\emph{Ki}\xspace}
%NOTED BUG: Spell names with mixed capitalization (Dispel magic) will not work properly.
\newcommand{\spell}[1]{\emph{\mbox{\hyperlink{spell:#1}{#1}}}}    %Italicize spells
\newcommand{\spellindirect}[2]{\emph{\hyperlink{spell:#1}{#2}}}
\newcommand{\ritual}[1]{\emph{#1}}    %Italicize spells
\newcommand{\cd}[1]{\par \textbf{#1}:}    %Bold class fluff description headers
\newcommand{\cf}[2]{\par \textbf{#2:}\label{#1:#2}}    %Bold class feature headers
\newcommand{\cfl}[3]{\par \textbf{#2 -- #3:}\label{#1:#3}}    %class feature with level
\newcommand{\cft}[3]{\par \textbf{#2 (#3):}\label{#1:#2}}    %class feature with extraordinary/supernatural type
\newcommand{\cfnl}[1]{\par \textbf{#1:}}    %class feature with no label
\newcommand{\cflt}[4]{\par \textbf{#2 -- #3 (#4):}\label{#1:#3}}    %class feature with level and extraordinary/supernatural type
\newcommand{\subcf}[1]{\par \emph{#1}:}    %Italicize sub-class-feature headers
\newcommand{\subsk}[1]{\par \emph{#1}:}    %Italicize sub-skill headers
\newcommand{\parhead}[1]{\par \textbf{#1}:}    %Bold the first word of sectional paragraphs
\newcommand{\parheadni}[1]{\par\noindent \textbf{#1}:}    %Bold the first word of sectional paragraphs, without indentation
\newcommand{\subparhead}[1]{\par \emph{#1}:}
\newcommand{\itemhead}[1]{\item \textbf{#1}}
\newcommand{\thead}[1]{\textbf{#1}}    %Bold the header of tables
\newcommand{\x}{---}    %A null entry in a table
\newcommand{\ccol}{\centering\arraybackslash}    %Center columns
\newcommand{\lcol}{\raggedright\arraybackslash}
\newcommand{\rcol}{\raggedleft\arraybackslash}
\newcommand{\booktitle}[1]{\emph{#1}}
%\newcommand{\footnotetemp}[1]{\tiny{[#1]}}    %I don't actually know how to make footnotes yet, so placeholder
\newcommand{\footnotetemp}[1]{\textsuperscript{#1}}
\newcommand{\fn}[1]{\textsuperscript{#1}}
\newcommand{\M}{\textsuperscript{M}}
\newcommand{\F}{\textsuperscript{F}}
\newcommand{\mfx}[1]{\emph{#1}}    % For material components, focuses, and XP costs for spells
\newcommand{\subspell}[1]{\emph{#1}:}    %For parts of spells
\newcommand{\magicitem}[1]{\emph{#1}}    %For the names of items
\newcommand{\mitem}[1]{\emph{#1}}
\newcommand{\shead}[1]{\> \textbf{#1}}    %For the headers of spells in spell lists
\newcommand{\spellhead}[2][]{\item[#1] \textbf{\hyperlink{spell:#2}{#2}:}}    %Spell in a spell list
\newcommand{\spellheadc}[3][]{\item[#1] \textbf{\hyperlink{spell:#3 #2}{#2, #3}:}}
\newcommand{\spellheadrestricted}[1]{\item \textit{\textbf{\hyperlink{spell:#1}{#1}:}}}  %Restricted spell in a spell list
\newcommand{\spellheadrestrictedc}[2]{\item \textit{\textbf{\hyperlink{spell:#2 #1}{#1, #2}:}}}  %Restricted spell in a spell list
\newcommand{\spellsection}[2]{\vspace{1em}\setlength\multicolsep{0pt}\begin{multicols}{2}
    \lowercase{\hypertarget{spell:#1}{}}\hypertarget{spell:#1}{\subsubsection{#1}}\columnbreak
    \begin{flushright}\large\textbf{\nth{#2} Level}\end{flushright}\end{multicols}
}
\newcommand{\spellsectioncomma}[3]{\vspace{1em}\setlength\multicolsep{0pt}\begin{multicols}{2}
    \lowercase{\hypertarget{spell:#2 #1}{}}\hypertarget{spell:#2 #1}{\subsubsection{#1, #2}}\columnbreak
    \begin{flushright}\large\textbf{\nth{#3} Level}\end{flushright}\end{multicols}
}
\newcommand{\invocationsection}[1]{\lowercase{\hypertarget{spell:#1}{}}\hypertarget{spell:#1}{\subsubsection{#1}}}
\newcommand{\invocationsectioncomma}[2]{\lowercase{\hypertarget{spell:#2 #1}{}}\hypertarget{spell:#2 #1}{\subsubsection{#1, #2}}}

\newcommand{\degree}{\ensuremath{^\circ}}    %Degree symbol
\newcommand{\tind}{\hspace{1em}}

\newcommand{\appdescription}[7]{\subsubsection{#1} \parhead{Price (Level)} #2 gp (#3) \parhead{Body Location} #4 \parhead{Aura, Caster Level} #5, #6 \parhead{Activation} #7 \par}
\newcommand{\appdescriptiondc}[8]{\appdescription{#1}{#2}{#3}{#4}{#5}{#6}{#7} \parhead{Special Attack (Attack Bonus)} #8 \par}
\newcommand{\impdescription}[6]{\subsubsection{#1} \parhead{Price (Level)} #2 gp (#3) \parhead{Aura, Caster Level} #4, #5 \parhead{Activation} #6 \par}
\newcommand{\impdescriptionnoact}[5]{\subsubsection{#1} \parhead{Price (Level)} #2 gp (#3) \parhead{Aura, Caster Level} #4, #5 \par}
\newcommand{\impdescriptiondc}[7]{\impdescription{#1}{#2}{#3}{#4}{#5}{#6} \parhead{Special Attack (Attack Bonus)} #7 \par}
\newcommand{\impdescriptiondcnoact}[6]{\impdescription{#1}{#2}{#3}{#4}{#5} \parhead{Special Attack (Attack Bonus)} #6 \par}
%Spell creation requirements, without descriptors
%School, subschool, spell level, caster level, craft skill
\newcommand{\mitemreq}[5]{\par \textit{Creation Requirements:} #1 (#2) #3; caster level #4 or #5}
\newcommand{\mitemreqdesc}[6]{\par \textit{Creation Requirements:} #1 (#2) [#3] #4; caster level #5 or #6}
%Legacy
\newcommand{\tooldescription}[6]{\subsubsection{#1} \parhead{Price (Level)} #2 gp (#3) \parhead{Caster Level} #4 \parhead{Aura} #5 \parhead{Activation} #6 \par}
%one shot items should not have scaling DCs
\newcommand{\tooldescriptiondcos}[7]{\tooldescription{#1}{#2}{#3}{#4}{#5}{#6} \parhead{Special Attack (Attack Bonus)} #7\par}
\newcommand{\tooldescriptiondc}[7]{\tooldescription{#1}{#2}{#3}{#4}{#5}{#6} \parhead{Special Attack (Attack Bonus)} #7\par}

\newcommand{\prereq}[1]{\subparhead{Prerequisites:} #1}
\newcommand{\bpl}[3]{(\plus #1) #2 gp (#3)}
\newcommand{\bcl}[2]{(\plus #1) #2}

%Monster commands for format consistency
%Starting with \\ instead of \par yields an indent
\newcommand{\montypes}[5]{\begin{mstatblock}\par #1 #2 #3 \hfill \textbf{CR} #4 [#5]}
\newcommand{\montypessubtypes}[6]{\begin{mstatblock}\par #1 #2 #3 (#4) \hfill \textbf{CR} #5 [#6]}
\newcommand{\monsenses}[2]{\par \textbf{Init} #1; Perception #2}
\newcommand{\monsensesspellcraft}[3]{\par \textbf{Init} #1; Perception #2, Spellcraft #3}
\newcommand{\monsensesspecial}[3]{\par \textbf{Init} #1; Perception #2; \textbf{Senses} #3}
\newcommand{\monsensesfull}[4]{\par \textbf{Init} #1; Perception #2, Spellcraft #3; \textbf{Senses} #4}
\newcommand{\monaura}[1]{\par \textbf{Aura} #1}
\newcommand{\monlanguages}[1]{\par \textbf{Languages} #1}
\newcommand{\monac}[5]{\par \textbf{AC} #1, touch #2, flat-footed #3; \textbf{CMD} #4 \\ (#5)}
\newcommand{\monacspecial}[6]{\par \textbf{AC} #1, touch #2, flat-footed #3; \textbf{CMD} #4; #5 \\ (#6)}
\newcommand{\monhp}[2]{\par \textbf{HP} #1 (#2 HV)}
\newcommand{\mondr}[1]{\textbf{DR} #1}
\newcommand{\monhpdr}[3]{\mhp{#1}{#2}; \mdr{#3}}
\newcommand{\monimmune}[1]{\par \textbf{Immune} #1}
\newcommand{\monresist}[1]{\par \textbf{Resist} #1}
\newcommand{\monsr}[1]{\textbf{SR} #1}
\newcommand{\monresistsr}[2]{\mres{#1}; \msr{#2}}
\newcommand{\monsaves}[3]{\par \textbf{Fort} \plus #1, \textbf{Ref} \plus #2, \textbf{Will} \plus #3}
\newcommand{\monsavesnegative}[3]{\par \textbf{Fort} #1, \textbf{Ref} #2, \textbf{Will} #3}
\newcommand{\monspeed}[1]{\textbf{Speed} #1}
\newcommand{\monmelee}[1]{\par \textbf{Melee} #1}
\newcommand{\monrange}[1]{\par \textbf{Ranged} #1}
\newcommand{\monspace}[2]{\par \textbf{Space} #1 ft.; \textbf{Reach} #2 ft.}
\newcommand{\monspacenofeet}[2]{\par \textbf{Space} #1; \textbf{Reach} #2}
\newcommand{\moncmb}[2]{\par \textbf{BAB} \plus #1; \textbf{CMB} \plus #2}
\newcommand{\moncmbnegative}[2]{\par \textbf{BAB} \plus #1; \textbf{CMB} #2}
\newcommand{\monspecialact}[1]{\par \textbf{Special Actions} #1}
\newcommand{\monsla}[5]{\par \textbf{Spell-Like Abilities (Sp)} (CL #1, DC #2, #3/day, #4--based): \\ #5}
\newcommand{\monpsi}[5]{\par \textbf{Psionics (Sp)} (CL #1, DC #2, #3/day, #4--based): \\ #5}
\newcommand{\monslamore}[1]{\\ #1}
\newcommand{\monattributes}[6]{\par \textbf{Attributes} Str #1, Dex #2, Con #3, Int #4, Wis #5, Cha #6}
\newcommand{\monsa}[1]{\par \textbf{SA} #1}
\newcommand{\monsq}[1]{\par \textbf{SQ} #1}
\newcommand{\monfeats}[1]{\par \textbf{Feats} #1}
\newcommand{\monskills}[1]{\par \textbf{Skills} #1}
\newcommand{\monitems}[1]{\par \textbf{Items} #1}
\newcommand{\monability}[2]{\par \textbf{#1} #2}
%http://tex.stackexchange.com/questions/128636/center-hrule-in-the-middle-of-the-page
\newcommand{\monlinerule}{\par\noindent\hfil\rule[0.5em]{0.9\columnwidth}{0.5pt}\hfil\par}
\newcommand{\mondescription}[1]{\par \end{mstatblock}\sssecfake{Description}\label{#1:Description}}
\newcommand{\mondescriptionnoblock}[1]{\par \sssecfake{Description}\label{#1:Description}}
\newcommand{\monbehavior}[1]{\sssecfake{Combat}\label{#1:Behavior}}

\newcommand{\wilditem}{\addtocounter{enumi}{1} \item}
\newcommand{\wilditemplus}{\addtocounter{enumi}{3} \item}

\newcommand{\spelldesc}[1]{\par \textit{#1}}
\newcommand{\spelldmg}[1]{\parheadni{Damage} #1}
\newcommand{\spellheal}[1]{\parheadni{Healing} #1}
\newcommand{\spellattack}[1]{\parheadni{Attack} #1}
\newcommand{\spellattacktarget}[2]{\spelltabularcompressed \thead{Attack:} #1 & \thead{Target:} #2 \\\end{tabularx}}
\newcommand{\spellattacktargets}[2]{\spelltabularcompressed \thead{Attack:} #1 & \thead{Targets:} #2 \\\end{tabularx}}
\newcommand{\spellattackseparatetarget}[1]{\parhead{Target} #1}
\newcommand{\spellattackseparatetargets}[1]{\parhead{Targets} #1}

\newcommand{\spelltargetattack}[2]{\spelltabularcompressed \thead{Target:} #1 & \thead{Attack:} #2 \\\end{tabularx}}
\newcommand{\spelltargetsattack}[2]{\spelltabularcompressed \thead{Targets:} #1 & \thead{Attack:} #2 \\\end{tabularx}}

\newcommand{\spellfocus}[1]{\par\noindent \textit{Focus:} #1}
\newcommand{\spellmat}[1]{\par\noindent \textit{Material Components:} #1}

\newcommand{\spelltwocol}[2]{\spelltabularcompressed #1 & #2\end{tabularx}}
\newcommand{\spellinfo}[2]{\spelltwocol{#1}{\thead{Lists:} #2}}

\newcommand{\spellschool}[1]{#1}
\newcommand{\spelllists}[1]{\parheadni{Lists} #1}
\newcommand{\spellcmp}[1]{\parheadni{Components} #1}
\newcommand{\spelltime}[1]{\parheadni{Casting Time} #1}
\newcommand{\spellrng}[1]{\parheadni{Range} #1}

\newcommand{\spellarea}[1]{\parheadni{Area} #1}
\newcommand{\spellburst}[1]{\parheadni{Burst} #1}
\newcommand{\spellemanation}[1]{\parheadni{Emanation} #1}
\newcommand{\spelllimit}[1]{\parheadni{Limit} #1}
\newcommand{\spellzone}[1]{\parheadni{Zone} #1}

\newcommand{\spelltgt}[1]{\parheadni{Target} #1}
\newcommand{\spelltgts}[1]{\parheadni{Targets} #1}
\newcommand{\spelltgtortgts}[1]{\parheadni{Target or Targets} #1}
\newcommand{\spelltgtorarea}[1]{\parheadni{Target or Area} #1}
\newcommand{\spelltgteffarea}[1]{\parheadni{Target or Area} #1}

\newcommand{\spelldur}[1]{\parheadni{Duration} #1}
\newcommand{\spellsr}[1]{\parheadni{Spell Resistance} #1}

\newcommand{\rngpers}{Personal}
\newcommand{\rngtouch}{Touch}
\newcommand{\rngclose}{Close \reminder{30 ft.}\xspace}
\newcommand{\rngmed}{Medium \reminder{100 ft.}\xspace}
\newcommand{\rnglong}{Long \reminder{300 ft.}\xspace}
\newcommand{\rngfar}{Long \reminder{300 ft.}\xspace}
\newcommand{\rngext}{Extreme \reminder{1,000 ft.}\xspace}
\newcommand{\areasmall}{Small \reminder{10 ft.}\xspace}
\newcommand{\areamed}{Medium \reminder{20 ft.}\xspace}
\newcommand{\arealarge}{Large \reminder{50 ft.}\xspace}
\newcommand{\durshort}{Short \reminder{Concentration \add 5 rounds}\xspace}
\newcommand{\durmed}{Medium \reminder{5 minutes}\xspace}
\newcommand{\durlong}{Long \reminder{1 hour}\xspace}
\newcommand{\durext}{Extreme \reminder{12 hours}\xspace}

\newcommand{\confusionexplanation}{Each turn, a confused creature has a random chance to take one of four actions: babble incoherently, flee from the caster as if panicked, attack the nearest creature, or act normally. A confused character who can't carry out the indicated action does nothing but babble incoherently. Any confused character who is attacked automatically attacks its attackers on its next turn, as long as it is still confused when its turn comes.\xspace}

\newcommand{\bonusscalingdescription}{This bonus increases to \plus3 at 8th level, to \plus4 at 14th level, and finally to \plus5 at 20th level.\xspace}
\newcommand{\spellbonusscalingdescription}{This bonus increases to \plus3 at 8th caster level, to \plus4 at 14th caster level, and finally to \plus5 at 20th caster level.\xspace}
\newcommand{\babscalingdescription}{This bonus increases to \plus3 at base attack bonus \plus8, to \plus4 at base attack bonus \plus12, and finally to \plus5 at base attack bonus \plus16.\xspace}

\newcommand{\feat}[2]{\hypertarget{feat:#1}{\sssecfakehref{ft:#1}{#1 [#2]}}\label{feat:#1}}
\newcommand{\featpre}{\parhead{Prerequisite} }
\newcommand{\featpres}{\parhead{Prerequisites} }
\newcommand{\featben}{\parhead{Benefit} }
\newcommand{\featref}[1]{\hyperlink{feat:#1}{\hypertarget{ft:#1}{#1}}}
\newcommand{\featpref}[1]{\pageref{feat:#1}}
%\newcommand{\featref}[1]{}

\newcommand{\skill}[2]{\subsection{#1 (#2)}\label{#1}}

\newcommand{\reminder}[1]{\textcolor{darkgray}{\textit{(#1)}}}

\newcommand{\vulnerableexplanation}{A vulnerable creature takes a \minus2 penalty to attacks, defenses, and checks.\xspace}
\newcommand{\vulneffect}{\minus2 to attacks, defenses, and checks\xspace}
\newcommand{\conditionlink}[1]{\hyperlink{condition:#1}{#1}\xspace}
\newcommand{\bewildered}{\conditionlink{bewildered} \reminder{\vulneffect}\xspace}
\newcommand{\blinded}{\conditionlink{blinded} \reminder{unable to see, moves at half speed, defenseless}\xspace}
\newcommand{\bloodied}{\conditionlink{bloodied} \reminder{half hit points}\xspace}
\newcommand{\confused}{\conditionlink{confused} \reminder{randomly babbles, flees, attacks nearest, or acts normally}\xspace}
\newcommand{\dazzled}{\conditionlink{dazzled} \reminder{20\% miss chance, \minus4 to visual Perception}\xspace}
\newcommand{\entangled}{\conditionlink{entangled} \reminder{move at half speed, unable to sprint or charge, \minus2 to physical attacks, defenses, and checks}\xspace}
\newcommand{\fatigued}{\conditionlink{fatigued} \reminder{unable to sprint or charge, \vulneffect}\xspace}
\newcommand{\frightened}{\conditionlink{frightened} \reminder{flees, \vulneffect}\xspace}
\newcommand{\dazed}{\conditionlink{dazed} \reminder{unable to act}\xspace}
\newcommand{\deafened}{\conditionlink{deafened} \reminder{unable to hear}\xspace}
\newcommand{\ignited}{\conditionlink{ignited} \reminder{d6 damage/round, Dex DC 10 to extinguish, \vulneffect}\xspace}
\newcommand{\nauseated}{\conditionlink{nauseated} \reminder{unable to act in action phase, \vulneffect}\xspace}
\newcommand{\paralyzed}{\conditionlink{paralyzed} \reminder{helpless, unable to move}\xspace}
\newcommand{\shaken}{\conditionlink{shaken} \reminder{\vulneffect}\xspace}
\newcommand{\sickened}{\conditionlink{sickened} \reminder{\vulneffect}\xspace}
\newcommand{\slowed}{\conditionlink{slowed} \reminder{unable to act in movement phase, \minus2 to physical attacks, defenses, and checks}\xspace}
\newcommand{\staggered}{\conditionlink{staggered} \reminder{unable to act in movement phase, \vulneffect}\xspace}
\newcommand{\stunned}{unable to act, \vulneffect\xspace}
\newcommand{\vulnerable}{\conditionlink{vulnerable} \reminder{\vulneffect}\xspace}

\newcommand{\condition}[1]{\parhead{#1}\label{#1}\hypertarget{condition:#1}{}}

\newcommand{\destructivespellnotes}{If a destructive spell deals enough damage to an interposing barrier to shatter or breaks through it, its effects may continue beyond the barrier if the area permits; otherwise, it stops at the barrier just as any other spell effect does.\xspace}
\newcommand{\firespellnotes}{Fire spells do not function underwater. They can ignite combustable materials, such as dry wood and cloth.}

\newcommand{\spelltabular}{\par\noindent\begin{tabularx}{\columnwidth}{>{\lcol}X l}\hangindent=1em}
\newcommand{\spelltabularcompressed}{\par\noindent\begin{tabularx}{\linewidth}{@{}>{\lcol}X l}\hangindent=1em}
\newcommand{\spelltablecolumns}{>{\lcol}X l}

\newcommand{\spelllevelschool}[2]{\spelllvl{#1} & #2 \\}
\newcommand{\spelllevelnew}[3]{\thead{\nth{#1} level} #2 & #3 \\}

\newcommand{\dismissable}{(Dismissable)}
\newcommand{\shapeable}{(S)}
\newcommand{\rngunrestricted}{(Unrestricted)}

% http://tex.stackexchange.com/questions/135617/how-to-i-reduce-space-before-and-after-hrule
\newcommand{\HRule}[2][\medskipamount]{\par
  \vspace*{\dimexpr-\parskip-\baselineskip+#1}
  \noindent\rule{\linewidth}{#2}\par
  \vspace*{\dimexpr-\parskip-.5\baselineskip+#1}}

\newcommand{\spellline}{\par\HRule[0.5\medskipamount]{0.2pt}}
% weird spacing before twocol
\newcommand{\spelllinespaced}{\spellline\vspace{0.5\medskipamount}}

\newcommand{\spelleffect}{\parheadni{Effect}\xspace}
\newcommand{\spellsuccess}{\parheadni{Success}\xspace}
%\newcommand{\spellfailure}{\parheadni{Failure}\xspace}
\newcommand{\spellnotes}{\spellline\par\noindent\textit{Note}:\xspace}
\newcommand{\spellspecial}{\parheadni{Special}\xspace}
\newcommand{\spellcheck}[1]{\parheadni{Check} #1\xspace}

\DeclareDocumentCommand{\spellfailure}{o}
{
    \IfNoValueTF{#1}
    {\parheadni{Failure}}
    {\par\noindent \textbf{Failure} (#1):}\xspace
}
